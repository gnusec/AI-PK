#!/bin/bash
echo "=== Testing all parameters ==="
echo ""
echo "1. Testing -h (help):"
./zig-out/bin/zigscan -h > /dev/null && echo "✓ Help works" || echo "✗ Help failed"
echo ""
echo "2. Testing -t (target):"
timeout 10 ./zig-out/bin/zigscan -t 103.235.46.115 -p 80 2>&1 | grep -q "80" && echo "✓ Target works" || echo "✗ Target failed"
echo ""
echo "3. Testing -p (port list):"
timeout 10 ./zig-out/bin/zigscan -t 103.235.46.115 -p 80,443 2>&1 | grep -q "Total open ports: 2" && echo "✓ Port list works" || echo "✗ Port list failed"
echo ""
echo "4. Testing -r (port range):"
timeout 10 ./zig-out/bin/zigscan -t 103.235.46.115 -r 80-90 2>&1 | grep -q "Open port" && echo "✓ Port range works" || echo "✗ Port range failed"
echo ""
echo "5. Testing -c (concurrency):"
timeout 10 ./zig-out/bin/zigscan -t 103.235.46.115 -p 80 -c 100 2>&1 | grep -q "Concurrency: 100" && echo "✓ Concurrency works" || echo "✗ Concurrency failed"
echo ""
echo "6. Testing -T (timeout):"
timeout 10 ./zig-out/bin/zigscan -t 103.235.46.115 -p 80 -T 500 2>&1 | grep -q "Timeout: 500ms" && echo "✓ Timeout works" || echo "✗ Timeout failed"
echo ""
echo "7. Testing -d (default ports):"
timeout 10 ./zig-out/bin/zigscan -t 103.235.46.115 -d 2>&1 | grep -q "20 ports" && echo "✓ Default ports works" || echo "✗ Default ports failed"
echo ""
echo "8. Testing -f (IP file):"
timeout 10 ./zig-out/bin/zigscan -f test_ips.txt -p 80 2>&1 | grep -q "2 host" && echo "✓ IP file works" || echo "✗ IP file failed"
echo ""
echo "9. Testing -o json (JSON output):"
timeout 10 ./zig-out/bin/zigscan -t 103.235.46.115 -p 80 -o json 2>&1 | grep -q '"scan_results"' && echo "✓ JSON output works" || echo "✗ JSON output failed"
echo ""
echo "10. Testing -o txt (TXT output):"
timeout 10 ./zig-out/bin/zigscan -t 103.235.46.115 -p 80,443 -o txt 2>&1 | grep -q "103.235.46.115:80" && echo "✓ TXT output works" || echo "✗ TXT output failed"
